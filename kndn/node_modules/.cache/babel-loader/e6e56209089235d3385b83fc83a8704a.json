{"ast":null,"code":"import { persistReducer } from 'redux-persist';\nimport storage from 'redux-persist/lib/storage';\nexport const actionTypes = {\n  Login: '[Login] Action',\n  Logout: '[Logout] Action',\n  Register: '[Register] Action',\n  UserRequested: '[Request User] Action',\n  UserLoaded: '[Load User] Auth API',\n  SetUser: '[Set User] Action'\n};\nconst initialAuthState = {\n  user: undefined,\n  accessToken: undefined\n};\nexport const reducer = persistReducer({\n  storage,\n  key: 'dgtt-auth',\n  whitelist: ['accessToken', 'user']\n}, function () {\n  let state = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : initialAuthState;\n  let action = arguments.length > 1 ? arguments[1] : undefined;\n\n  switch (action.type) {\n    case actionTypes.Login:\n      {\n        var _action$payload$user, _action$payload, _user$token;\n\n        const _user = (_action$payload$user = action === null || action === void 0 ? void 0 : (_action$payload = action.payload) === null || _action$payload === void 0 ? void 0 : _action$payload.user) !== null && _action$payload$user !== void 0 ? _action$payload$user : {};\n\n        const _token = (_user$token = _user === null || _user === void 0 ? void 0 : _user.token) !== null && _user$token !== void 0 ? _user$token : '';\n\n        return {\n          user: _user,\n          accessToken: _token\n        };\n      }\n\n    case actionTypes.Register:\n      {\n        var _action$payload2;\n\n        const accessToken = (_action$payload2 = action.payload) === null || _action$payload2 === void 0 ? void 0 : _action$payload2.accessToken;\n        return {\n          accessToken,\n          user: undefined\n        };\n      }\n\n    case actionTypes.Logout:\n      {\n        return initialAuthState;\n      }\n\n    case actionTypes.UserRequested:\n      {\n        return { ...state,\n          user: undefined\n        };\n      }\n\n    case actionTypes.UserLoaded:\n      {\n        var _action$payload3;\n\n        const user = (_action$payload3 = action.payload) === null || _action$payload3 === void 0 ? void 0 : _action$payload3.user;\n        return { ...state,\n          user\n        };\n      }\n\n    case actionTypes.SetUser:\n      {\n        var _action$payload4;\n\n        const user = (_action$payload4 = action.payload) === null || _action$payload4 === void 0 ? void 0 : _action$payload4.user;\n        return { ...state,\n          user\n        };\n      }\n\n    default:\n      return state;\n  }\n});\nexport const actions = {\n  login: user => ({\n    type: actionTypes.Login,\n    payload: {\n      user\n    }\n  }),\n  register: accessToken => ({\n    type: actionTypes.Register,\n    payload: {\n      accessToken\n    }\n  }),\n  logout: () => ({\n    type: actionTypes.Logout\n  }),\n  requestUser: () => ({\n    type: actionTypes.UserRequested\n  })\n};\nexport function* saga() {}","map":{"version":3,"names":["persistReducer","storage","actionTypes","Login","Logout","Register","UserRequested","UserLoaded","SetUser","initialAuthState","user","undefined","accessToken","reducer","key","whitelist","state","action","type","_user","payload","_token","token","actions","login","register","logout","requestUser","saga"],"sources":["C:/Users/lappv/Desktop/KNDN/kndn/src/app/modules/auth/redux/AuthRedux.ts"],"sourcesContent":["import { Action } from '@reduxjs/toolkit'\r\nimport { persistReducer } from 'redux-persist'\r\nimport storage from 'redux-persist/lib/storage'\r\nimport { put, takeLatest } from 'redux-saga/effects'\r\nimport { UserModel } from '../models/UserModel'\r\n\r\nexport interface ActionWithPayload<T> extends Action {\r\n  payload?: T\r\n}\r\n\r\nexport const actionTypes = {\r\n  Login: '[Login] Action',\r\n  Logout: '[Logout] Action',\r\n  Register: '[Register] Action',\r\n  UserRequested: '[Request User] Action',\r\n  UserLoaded: '[Load User] Auth API',\r\n  SetUser: '[Set User] Action',\r\n}\r\n\r\nconst initialAuthState: IAuthState = {\r\n  user: undefined,\r\n  accessToken: undefined,\r\n}\r\n\r\nexport interface IAuthState {\r\n  user?: any\r\n  accessToken?: string\r\n}\r\n\r\nexport const reducer = persistReducer(\r\n  { storage, key: 'dgtt-auth', whitelist: ['accessToken', 'user'] },\r\n  (state: IAuthState = initialAuthState, action: ActionWithPayload<IAuthState>) => {\r\n    switch (action.type) {\r\n      case actionTypes.Login: {\r\n        const _user = action?.payload?.user ?? {}\r\n        const _token = _user?.token ?? ''\r\n        return { user: _user, accessToken: _token }\r\n      }\r\n\r\n      case actionTypes.Register: {\r\n        const accessToken = action.payload?.accessToken\r\n        return { accessToken, user: undefined }\r\n      }\r\n\r\n      case actionTypes.Logout: {\r\n        return initialAuthState\r\n      }\r\n\r\n      case actionTypes.UserRequested: {\r\n        return { ...state, user: undefined }\r\n      }\r\n\r\n      case actionTypes.UserLoaded: {\r\n        const user = action.payload?.user\r\n        return { ...state, user }\r\n      }\r\n\r\n      case actionTypes.SetUser: {\r\n        const user = action.payload?.user\r\n        return { ...state, user }\r\n      }\r\n\r\n      default:\r\n        return state\r\n    }\r\n  }\r\n)\r\n\r\nexport const actions = {\r\n  login: (user: UserModel) => ({ type: actionTypes.Login, payload: { user } }),\r\n  register: (accessToken: string) => ({\r\n    type: actionTypes.Register,\r\n    payload: { accessToken },\r\n  }),\r\n  logout: () => ({ type: actionTypes.Logout }),\r\n  requestUser: () => ({\r\n    type: actionTypes.UserRequested,\r\n  }),\r\n}\r\n\r\nexport function* saga() {\r\n\r\n}\r\n"],"mappings":"AACA,SAASA,cAAT,QAA+B,eAA/B;AACA,OAAOC,OAAP,MAAoB,2BAApB;AAQA,OAAO,MAAMC,WAAW,GAAG;EACzBC,KAAK,EAAE,gBADkB;EAEzBC,MAAM,EAAE,iBAFiB;EAGzBC,QAAQ,EAAE,mBAHe;EAIzBC,aAAa,EAAE,uBAJU;EAKzBC,UAAU,EAAE,sBALa;EAMzBC,OAAO,EAAE;AANgB,CAApB;AASP,MAAMC,gBAA4B,GAAG;EACnCC,IAAI,EAAEC,SAD6B;EAEnCC,WAAW,EAAED;AAFsB,CAArC;AAUA,OAAO,MAAME,OAAO,GAAGb,cAAc,CACnC;EAAEC,OAAF;EAAWa,GAAG,EAAE,WAAhB;EAA6BC,SAAS,EAAE,CAAC,aAAD,EAAgB,MAAhB;AAAxC,CADmC,EAEnC,YAAiF;EAAA,IAAhFC,KAAgF,uEAA5DP,gBAA4D;EAAA,IAA1CQ,MAA0C;;EAC/E,QAAQA,MAAM,CAACC,IAAf;IACE,KAAKhB,WAAW,CAACC,KAAjB;MAAwB;QAAA;;QACtB,MAAMgB,KAAK,2BAAGF,MAAH,aAAGA,MAAH,0CAAGA,MAAM,CAAEG,OAAX,oDAAG,gBAAiBV,IAApB,uEAA4B,EAAvC;;QACA,MAAMW,MAAM,kBAAGF,KAAH,aAAGA,KAAH,uBAAGA,KAAK,CAAEG,KAAV,qDAAmB,EAA/B;;QACA,OAAO;UAAEZ,IAAI,EAAES,KAAR;UAAeP,WAAW,EAAES;QAA5B,CAAP;MACD;;IAED,KAAKnB,WAAW,CAACG,QAAjB;MAA2B;QAAA;;QACzB,MAAMO,WAAW,uBAAGK,MAAM,CAACG,OAAV,qDAAG,iBAAgBR,WAApC;QACA,OAAO;UAAEA,WAAF;UAAeF,IAAI,EAAEC;QAArB,CAAP;MACD;;IAED,KAAKT,WAAW,CAACE,MAAjB;MAAyB;QACvB,OAAOK,gBAAP;MACD;;IAED,KAAKP,WAAW,CAACI,aAAjB;MAAgC;QAC9B,OAAO,EAAE,GAAGU,KAAL;UAAYN,IAAI,EAAEC;QAAlB,CAAP;MACD;;IAED,KAAKT,WAAW,CAACK,UAAjB;MAA6B;QAAA;;QAC3B,MAAMG,IAAI,uBAAGO,MAAM,CAACG,OAAV,qDAAG,iBAAgBV,IAA7B;QACA,OAAO,EAAE,GAAGM,KAAL;UAAYN;QAAZ,CAAP;MACD;;IAED,KAAKR,WAAW,CAACM,OAAjB;MAA0B;QAAA;;QACxB,MAAME,IAAI,uBAAGO,MAAM,CAACG,OAAV,qDAAG,iBAAgBV,IAA7B;QACA,OAAO,EAAE,GAAGM,KAAL;UAAYN;QAAZ,CAAP;MACD;;IAED;MACE,OAAOM,KAAP;EA/BJ;AAiCD,CApCkC,CAA9B;AAuCP,OAAO,MAAMO,OAAO,GAAG;EACrBC,KAAK,EAAGd,IAAD,KAAsB;IAAEQ,IAAI,EAAEhB,WAAW,CAACC,KAApB;IAA2BiB,OAAO,EAAE;MAAEV;IAAF;EAApC,CAAtB,CADc;EAErBe,QAAQ,EAAGb,WAAD,KAA0B;IAClCM,IAAI,EAAEhB,WAAW,CAACG,QADgB;IAElCe,OAAO,EAAE;MAAER;IAAF;EAFyB,CAA1B,CAFW;EAMrBc,MAAM,EAAE,OAAO;IAAER,IAAI,EAAEhB,WAAW,CAACE;EAApB,CAAP,CANa;EAOrBuB,WAAW,EAAE,OAAO;IAClBT,IAAI,EAAEhB,WAAW,CAACI;EADA,CAAP;AAPQ,CAAhB;AAYP,OAAO,UAAUsB,IAAV,GAAiB,CAEvB"},"metadata":{},"sourceType":"module"}